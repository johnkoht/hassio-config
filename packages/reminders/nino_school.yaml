binary_sensor:
  - platform: tod
    name: Nino School Hours
    after: "09:00"
    before: "13:15"

  - platform: workday
    country: US
    name: "Nino School Days"
    excludes: [fri]
# Is it a school day?
# is nino at school?
# Notify to get ready
# Notify to leave
# Notify to pick up

automation:
  # Turn on the automations if it's a school day
  #
  - id: "nino_school_day_automations_on"
    alias: "Nino School Day Automations On"
    initial_state: off
    mode: "single"
    trigger:
      # School day sensor turns on
      - platform: state
        entity_id: binary_sensor.nino_school_days
        to: "on"
      # Hassio restart/relaod
      - platform: homeassistant
        event: start
      - platform: event
        event_type: automation_reloaded
    condition:
      - condition: state
        entity_id: binary_sensor.nino_school_days
        state: "on"
    action:
      - service: automation.turn_on
        entity_id: automation.nino_school_day_reminder
      - service: automation.turn_on
        entity_id: automation.nino_school_departure_reminder
      - service: automation.turn_on
        entity_id: automation.nino_school_pickup_reminder

  # Turn off the automations if it's NOT a school day
  #
  - id: "nino_school_day_automations_off"
    alias: "Nino School Day Automations Off"
    mode: "single"
    initial_state: off
    trigger:
      # School day sensor turns OFF
      - platform: state
        entity_id: binary_sensor.nino_school_days
        to: "off"
      # Hassio restart/relaod
      - platform: homeassistant
        event: start
      - platform: event
        event_type: automation_reloaded
    condition:
      - condition: state
        entity_id: binary_sensor.nino_school_days
        state: "off"
    action:
      - service: automation.turn_off
        entity_id: automation.nino_school_day_reminder
      - service: automation.turn_off
        entity_id: automation.nino_school_departure_reminder
      - service: automation.turn_off
        entity_id: automation.nino_school_pickup_reminder
