# Nino school departure reminder
#
automation:
  - id: "nino_school_departure_reminder"
    alias: "Nino School Departure Reminder"
    mode: "single"
    initial_state: on
    trigger:
      # 20 mins before start
      - platform: calendar
        event: start
        entity_id: calendar.ninos_school_day
        offset: -00:20:00
    condition:
      - condition: state
        entity_id: input_boolean.house_occupied
        state: "on"
      # Nino school day boolean is ON
      - condition: state
        entity_id: input_boolean.nino_school_day
        state: "on"
    action:
      # Call the announcement engine
      - service: script.general_announcement
        data:
          speech_message: >-
            {{
              [
                "School starts soon. Time to pack up and head out!",
                "Hey gang, time to start heading over to school.",
                "You gonna learn today. Time for School, Nino.",
                "Pack it up, pack it in, time to drop Nino at school."
              ] | random
            }}
          media_players: "auto"
          sound: "school-bell"
